<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>WebAR — ArUco ثابت</title>

  <!-- مكتبات أساسية -->
  <link rel="preconnect" href="https://aframe.io" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <script defer src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.4/aframe/build/aframe-ar.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    :root { color-scheme: dark; font-family: -apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Arial,sans-serif; }
    html,body { margin:0; height:100%; overflow:hidden; background:#000; }

    /* إلغاء شاشة التحميل الافتراضية */
    .a-loader, .a-loader-title { display:none !important; }

    /* أزرار زجاجية (يسار/منتصف) */
    .btns{position:fixed; top:50%; left:18px; transform:translateY(-50%); display:flex; flex-direction:column; gap:12px; z-index:4}
    .gbtn{min-width:220px; display:inline-flex; align-items:center; gap:10px; padding:13px 18px; color:#fff; text-decoration:none;
          font-weight:700; font-size:15px; letter-spacing:-.2px;
          background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.26); border-radius:20px;
          backdrop-filter: blur(16px) saturate(140%); -webkit-backdrop-filter: blur(16px) saturate(140%)}
    .ico{width:20px; height:20px}
    .hint{position:fixed; left:12px; bottom:12px; z-index:3; max-width:min(70vw,360px);
          color:#cfefff; background:rgba(0,42,60,.55); border:1px solid rgba(153,232,255,.35);
          padding:10px 12px; border-radius:12px; backdrop-filter:blur(12px); -webkit-backdrop-filter:blur(12px); font-size:13px}

    @media (max-width:720px){
      .btns{ top:auto; bottom:18px; left:50%; transform:translateX(-50%); flex-direction:row; flex-wrap:wrap; gap:10px }
      .gbtn{ min-width:min(220px,42vw); justify-content:center; padding-inline:16px }
    }
  </style>
</head>
<body>
  <!-- أزرار التسويق -->
  <nav class="btns" aria-label="روابط التواصل">
    <a class="gbtn" href="https://instagram.com/t.__x" target="_blank" rel="noopener">
      <svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="2.5" y="2.5" width="19" height="19" rx="5" stroke="currentColor" stroke-width="1.2"/><circle cx="12" cy="12" r="4.2" stroke="currentColor" stroke-width="1.2"/><circle cx="17.4" cy="6.6" r="1.2" fill="currentColor"/></svg>
      Instagram • t.__x
    </a>
    <a class="gbtn" href="mailto:tammamosama101@gmail.com">
      <svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="3" y="5" width="18" height="14" rx="3" stroke="currentColor" stroke-width="1.2"/><path d="M5.2 7.4 12 12.1l6.8-4.7" stroke="currentColor" stroke-width="1.2"/></svg>
      E-mail • tammamosama101@gmail.com
    </a>
    <a class="gbtn" href="tel:+9647822911170">
      <svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6.6 3.2h1.9l1.5 4.1-1.8 1.4a14.3 14.3 0 0 0 6.3 6.3l1.4-1.8 4.1 1.5v1.9c0 1-1 3-3 3A14.8 14.8 0 0 1 3.1 7c0-2 1.9-3.8 3.5-3.8Z" stroke="currentColor" stroke-width="1.2"/></svg>
      اتصال • 07822911170
    </a>
    <a class="gbtn" href="https://wa.me/9647822911170" target="_blank" rel="noopener">
      <svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2.4a9.6 9.6 0 0 0-8.7 13.8l-.9 3.9 4-1.3A9.6 9.6 0 1 0 12 2.4Z" stroke="currentColor" stroke-width="1.2"/><path d="M9.6 8.1c-.2.1-.5.5-.6.7-.1.4-.2.8.1 1.2.3.4.5.7.7 1l.3.4c.3.3.7.8 1.4 1.3.6.5 1.1.7 1.4.8.4.1.6.1.8-.1l.4-.5c.1-.1.2-.2.3-.3.1-.1.2-.2.4-.2.2 0 .3 0 .5.1l.6.3c.2.1.3.1.4.2.2.1.4.2.4.3.1.1.1.3 0 .4-.1.3-.3.7-.6 1-.4.5-1.1.8-1.8.7-1.1 0-2.2-.5-3.3-1.2-1-.7-1.9-1.6-2.7-2.7-.7-1.1-1.2-2.2-1.1-3.3 0-.8.2-1.5.7-1.8.3-.3.7-.5 1-.6.2 0 .3 0 .4.1.1.1.2.2.3.4.1.1.2.2.3.4.1.1.1.2 0 .3Z" fill="currentColor"/></svg>
      WhatsApp • 07822911170
    </a>
  </nav>

  <div class="hint">اسمح للكاميرا ثم وجّهها نحو ماركر ArUco رقم 5. سيظهر المجسّم على يمين الماركر ويبقى ثابتاً.</div>

  <!-- مشهد AR: بدون لودر، مع alpha لإزالة أي خلفية ملونة -->
  <a-scene
    embedded
    loading-screen="enabled:false"
    vr-mode-ui="enabled:false"
    device-orientation-permission-ui="enabled:true"
    renderer="alpha:true; antialias:true; logarithmicDepthBuffer:true"
    arjs="sourceType:webcam; facingMode:environment; sourceWidth:640; sourceHeight:480; displayWidth:640; displayHeight:480; trackingMethod:best; detectionMode:mono; debugUIEnabled:false;">
    
    <a-assets timeout="60000">
      <!-- بدّل اسم الملف لو مختلف -->
      <a-asset-item id="glb" src="3d-1.glb"></a-asset-item>
    </a-assets>

    <!-- ماركر ArUco value=5 (size بالمتر؛ 0.16 = 16 سم) -->
    <a-marker id="marker"
      type="barcode" value="5" size="0.16"
      emitevents="true"
      hide-on-lost="false"
      smooth="true" smoothCount="5" smoothTolerance="0.01" smoothThreshold="2">

      <!-- الموديل: يمين الماركر وأكبر منه -->
      <a-entity id="model"
        gltf-model="#glb"
        position="0.65 0 0"   <!-- يمين الماركر -->
        rotation="0 0 0"
        scale="1.35 1.35 1.35"
        animation-mixer>
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // لوج بسيط لتشخيص صلاحية الكاميرا
    window.addEventListener('camera-init', () => console.log('✅ camera-init'));
    window.addEventListener('camera-error', (e) => {
      alert('⚠️ تعذّر تشغيل الكاميرا.\nتأكد من الإذن وفتح الصفحة عبر HTTPS واستخدم Chrome/Safari.');
      console.error(e);
    });
  </script>
</body>
</html>
