<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <title>AR – ثابت بجانب الماركر</title>

  <!-- مكتبات -->
  <link rel="preconnect" href="https://aframe.io" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <script defer src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.4/aframe/build/aframe-ar.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <style>
    html,body{margin:0;height:100%;overflow:hidden;background:#000}
    /* أزرار زجاجية (مختصرة) */
    .btns{position:fixed;top:50%;left:18px;transform:translateY(-50%);
      display:flex;flex-direction:column;gap:12px;z-index:3}
    .gbtn{min-width:210px;display:inline-flex;align-items:center;gap:10px;
      padding:13px 18px;color:#fff;text-decoration:none;font:600 15px -apple-system,BlinkMacSystemFont,"SF Pro",Segoe UI,Roboto,Arial;
      background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.25);border-radius:18px;
      backdrop-filter:blur(14px) saturate(120%);-webkit-backdrop-filter:blur(14px) saturate(120%)}
    .ico{width:18px;height:18px}
    .hint{position:fixed;left:12px;bottom:12px;z-index:2;color:#cfefff;
      font:500 13px/1.2 -apple-system,BlinkMacSystemFont,"SF Pro",Segoe UI,Roboto,Arial;
      background:rgba(0,42,60,.55);border:1px solid rgba(153,232,255,.25);
      padding:10px 12px;border-radius:12px;backdrop-filter:blur(10px);max-width:70vw}
  </style>
</head>
<body>
  <!-- أزرار التسويق -->
  <div class="btns">
    <a class="gbtn" href="https://instagram.com/t.__x" target="_blank" rel="noopener">
      <svg class="ico" viewBox="0 0 24 24" fill="none"><rect x="2.5" y="2.5" width="19" height="19" rx="5" stroke="currentColor"/><circle cx="12" cy="12" r="4.2" stroke="currentColor"/><circle cx="17.6" cy="6.6" r="1.3" fill="currentColor"/></svg>
      Instagram • t.__x
    </a>
    <a class="gbtn" href="mailto:tammamosama101@gmail.com">
      <svg class="ico" viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="14" rx="3" stroke="currentColor"/><path d="M5 7l7 5 7-5" stroke="currentColor"/></svg>
      E-mail • tammamosama101@gmail.com
    </a>
    <a class="gbtn" href="tel:+9647822911170">
      <svg class="ico" viewBox="0 0 24 24" fill="none"><path d="M6.5 3h2l1.5 4-2 1.5a14 14 0 0 0 6.5 6.5L16 13.5l4 1.5v2c0 1-1 3-3 3A14.5 14.5 0 0 1 3 7c0-2 2-3 3.5-3Z" stroke="currentColor"/></svg>
      اتصال • 07822911170
    </a>
    <a class="gbtn" href="https://wa.me/9647822911170" target="_blank">
      <svg class="ico" viewBox="0 0 24 24" fill="none"><path d="M12 2a9.9 9.9 0 0 0-8.9 14.4L2 22l5.7-1.8A9.9 9.9 0 1 0 12 2Z" stroke="currentColor"/><path d="M9.5 8c-.2.1-.5.5-.6.8-.1.4-.2.8.1 1.2.3.4.5.7.7 1l.3.4c.3.3.8.9 1.5 1.4.6.5 1.2.8 1.5.9.4.1.6.1.8-.1l.5-.6c.1-.1.2-.2.3-.3.1-.1.2-.2.4-.2.2 0 .3 0 .5.1l.6.3c.2.1.3.1.4.2.2.1.4.2.4.3.1.1.1.3 0 .5-.1.3-.3.7-.6 1-.4.5-1.1.8-1.9.7-1.1 0-2.3-.5-3.5-1.2-1-.7-2-1.7-2.8-2.8-.8-1.1-1.3-2.3-1.2-3.5 0-.8.2-1.5.7-1.9.3-.3.7-.5 1-.6.2 0 .3 0 .4.1.1.1.2.2.3.4.1.1.2.2.3.4.1.1.1.2 0 .4Z" fill="currentColor"/></svg>
      WhatsApp • 07822911170
    </a>
  </div>

  <div class="hint">اسمح للكاميرا ثم وجّهها على الماركر. سنُبقي المجسم مرتبطاً بالماركر وبحجم أكبر وعلى يمينه.</div>

  <!-- مشهد AR: alpha=true يساعد iOS يعرض فيديو الخلفية بدل السواد -->
  <a-scene
    embedded
    vr-mode-ui="enabled:false"
    renderer="alpha:true; antialias:true; logarithmicDepthBuffer:true"
    arjs="sourceType: webcam; sourceWidth:640; sourceHeight:480; displayWidth:640; displayHeight:480; detectionMode: mono; debugUIEnabled:false;">
    
    <a-assets>
      <!-- بدّل اسم الملف إن لزم -->
      <a-asset-item id="glb" src="connor_rk900_-_detroit_become_human.glb"></a-asset-item>
    </a-assets>

    <!-- نُبقي الأطفال ظاهرة حتى لو فُقد التتبّع: hide-on-lost=false -->
    <a-marker type="pattern" url="marker.patt" emitevents="true" hide-on-lost="false" smooth="true" smoothCount="4" smoothTolerance="0.01" smoothThreshold="2">
      <!-- نضع الموديل على يمين الماركر مباشرة: position X>0 (مثلاً 0.6 متر) -->
      <a-entity id="model"
        gltf-model="#glb"
        position="0.60 0 0"         <!-- يمين الماركر: عدّل الرقم للتقريب/الإبعاد -->
        rotation="0 0 0"            <!-- بدون دوران تلقائي -->
        scale="1.2 1.2 1.2"         <!-- أكبر بقليل من الماركر -->
        animation-mixer>            <!-- يشغّل أنيميشن الموديل إن وُجد، مو دوران -->
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // لو صار فشل كاميرا على iOS/سفاري
    window.addEventListener('camera-error', e=>{
      alert('⚠️ تعذّر الوصول للكاميرا.\nتأكد من الإذن واستخدم Chrome/Safari على HTTPS.');
      console.error(e);
    });
  </script>
</body>
</html>
